namespace = tr_class_event

tr_class_event.01 = { ##root

    type = character_event
    title = class_events_root
    window = visit_settlement_window
    theme = mental_health
    desc = class_events_root_desc

    left_portrait = {
        character = root
        animation = personality_rational
    }

    option = { # select/modify class
        name = class_events_select
        trigger = {
            piety >= 400
        }
        custom_tooltip = class_events_select_tip
        trigger_event = {
            id = tr_class_event.11 #select root class
        }
        ai_chance = {
            base = 1
        }
    }

    option = { # reset classes
        name = class_events_clean
        trigger = {
            OR = {
                root = { has_trait = class_bar }
                root = { has_trait = class_bar_berserker }
                root = { has_trait = class_bar_wild_magic }
                root = { has_trait = class_bar_wildheart }
                root = { has_trait = class_bar_giant }

                root = { has_trait = class_bard }
                root = { has_trait = class_bard_college_of_lore }
                root = { has_trait = class_bard_college_of_valour }
                root = { has_trait = class_bard_college_of_sword }
                root = { has_trait = class_bard_college_of_glamour }

                root = { has_trait = class_cleric }
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_war }
                root = { has_trait = class_cleric_death }

                root = { has_trait = class_druid }
                root = { has_trait = class_druid_land }
                root = { has_trait = class_druid_moon }
                root = { has_trait = class_druid_spore }
                root = { has_trait = class_druid_star }

                root = { has_trait = class_fighter }
                root = { has_trait = class_fighter_master }
                root = { has_trait = class_fighter_knight }
                root = { has_trait = class_fighter_champion }
                root = { has_trait = class_fighter_arcane_archer }

                root = { has_trait = class_monk }
                root = { has_trait = class_monk_shadow }
                root = { has_trait = class_monk_element }
                root = { has_trait = class_monk_hand }
                root = { has_trait = class_monk_drunk }

                root = { has_trait = class_paladin }
                root = { has_trait = class_paladin_ancient }
                root = { has_trait = class_paladin_devotion }
                root = { has_trait = class_paladin_vengeance }
                root = { has_trait = class_paladin_crown }
                root = { has_trait = class_paladin_oathbreaker }

                root = { has_trait = class_ranger }
                root = { has_trait = class_ranger_hunter }
                root = { has_trait = class_ranger_master }
                root = { has_trait = class_ranger_gloom }
                root = { has_trait = class_ranger_swarmkeeper }

                root = { has_trait = class_rogue }
                root = { has_trait = class_rogue_thief }
                root = { has_trait = class_rogue_trick }
                root = { has_trait = class_rogue_assassin }
                root = { has_trait = class_rogue_swashbuckler }

                root = { has_trait = class_sorcerer }
                root = { has_trait = class_sorcerer_wild }
                root = { has_trait = class_sorcerer_dragon }
                root = { has_trait = class_sorcerer_storm }
                root = { has_trait = class_sorcerer_shadow }

                root = { has_trait = class_warlock }
                root = { has_trait = class_warlock_fiend }
                root = { has_trait = class_warlock_great }
                root = { has_trait = class_warlock_archfey }
                root = { has_trait = class_warlock_hexblade }

                root = { has_trait = class_wizard }
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_transmutation }
                root = { has_trait = class_wizard_bladesinging }
            }
        }
        custom_tooltip = class_events_clean_tip

        remove_trait = class_bar
        remove_trait = class_bar_berserker
        remove_trait = class_bar_wild_magic
        remove_trait = class_bar_wildheart
        remove_trait = class_bar_giant

        remove_trait = class_bard
        remove_trait = class_bard_college_of_lore
        remove_trait = class_bard_college_of_valour
        remove_trait = class_bard_college_of_sword
        remove_trait = class_bard_college_of_glamour

        remove_trait = class_cleric
        remove_trait = class_cleric_life
        remove_trait = class_cleric_light
        remove_trait = class_cleric_trick
        remove_trait = class_cleric_knowledge
        remove_trait = class_cleric_nature
        remove_trait = class_cleric_tempest
        remove_trait = class_cleric_war
        remove_trait = class_cleric_death

        remove_trait = class_druid
        remove_trait = class_druid_land
        remove_trait = class_druid_moon
        remove_trait = class_druid_spore
        remove_trait = class_druid_star

        remove_trait = class_fighter
        remove_trait = class_fighter_master
        remove_trait = class_fighter_knight
        remove_trait = class_fighter_champion
        remove_trait = class_fighter_arcane_archer

        remove_trait = class_monk
        remove_trait = class_monk_shadow
        remove_trait = class_monk_element
        remove_trait = class_monk_hand
        remove_trait = class_monk_drunk

        remove_trait = class_paladin
        remove_trait = class_paladin_ancient
        remove_trait = class_paladin_devotion
        remove_trait = class_paladin_vengeance
        remove_trait = class_paladin_crown
        remove_trait = class_paladin_oathbreaker

        remove_trait = class_ranger
        remove_trait = class_ranger_hunter
        remove_trait = class_ranger_master
        remove_trait = class_ranger_gloom
        remove_trait = class_ranger_swarmkeeper

        remove_trait = class_rogue
        remove_trait = class_rogue_thief
        remove_trait = class_rogue_trick
        remove_trait = class_rogue_assassin
        remove_trait = class_rogue_swashbuckler

        remove_trait = class_sorcerer
        remove_trait = class_sorcerer_wild
        remove_trait = class_sorcerer_dragon
        remove_trait = class_sorcerer_storm
        remove_trait = class_sorcerer_shadow

        remove_trait = class_warlock
        remove_trait = class_warlock_fiend
        remove_trait = class_warlock_great
        remove_trait = class_warlock_archfey
        remove_trait = class_warlock_hexblade

        remove_trait = class_wizard
        remove_trait = class_wizard_abjuration
        remove_trait = class_wizard_evocation
        remove_trait = class_wizard_necromancy
        remove_trait = class_wizard_conjuration
        remove_trait = class_wizard_enchantment
        remove_trait = class_wizard_divination
        remove_trait = class_wizard_illusion
        remove_trait = class_wizard_transmutation
        remove_trait = class_wizard_bladesinging

        #add_piety = 500

        ai_chance = {
            base = 1
        }
    }

    option = { ## cancel
        name = class_events_cancel
        custom_tooltip = class_events_cancel_tip
    }
}

tr_class_event.11 = { ## select/modify class

    type = character_event
    title = class_events_select
    window = visit_settlement_window
    theme = mental_health
    desc = class_events_select_desc

    left_portrait = {
        character = root
        animation = personality_rational
    }

    option = { # ADD NEW
        name = class_events_add
        trigger = {
            NAND = {
                root = { has_trait = class_bar }
                root = { has_trait = class_rogue }
                root = { has_trait = class_ranger }
                root = { has_trait = class_fighter }
                root = { has_trait = class_sorcerer }
                root = { has_trait = class_wizard }
                root = { has_trait = class_warlock }
                root = { has_trait = class_paladin }
                root = { has_trait = class_cleric }
                root = { has_trait = class_monk }
                root = { has_trait = class_bard }
                root = { has_trait = class_druid }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_tip
        trigger_event = {
            id = tr_class_event.21 #add another base class
        }
        ai_chance = {
            base = 1
        }
    }

    option = { #
        name = class_events_add_sub
        trigger = {
            OR = {
                root = { has_trait = class_bar }
                root = { has_trait = class_rogue }
                root = { has_trait = class_ranger }
                root = { has_trait = class_fighter }
                root = { has_trait = class_sorcerer }
                root = { has_trait = class_wizard }
                root = { has_trait = class_warlock }
                root = { has_trait = class_paladin }
                root = { has_trait = class_cleric }
                root = { has_trait = class_monk }
                root = { has_trait = class_bard }
                root = { has_trait = class_druid }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_sub_tip
        trigger_event = {
            id = tr_class_event.31 #modify sub class
        }
        ai_chance = {
            base = 1
        }
    }

    option = { # return
        name = class_events_return
        custom_tooltip = class_events_return_tip

        trigger_event = {
            id = tr_class_event.01 #root
        }
    }

}

tr_class_event.21 = { ## add base class

    type = character_event
    title = class_events_add
    window = visit_settlement_window
    theme = mental_health
    desc = class_events_add_desc

    left_portrait = {
        character = root
        animation = personality_rational
    }

    option = { # Barbarian
        name = class_events_add_bar
        trigger = {
            NOR = {
                root = { has_trait = class_bar }
                root = { has_trait = class_bar_wild_magic }
                root = { has_trait = class_bar_wildheart }
                root = { has_trait = class_bar_berserker }
                root = { has_trait = class_bar_giant }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_bar_tip

        add_trait = class_bar
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = education_martial_prowess_1
			}
            modifier = {
				add = 2
				has_trait = education_martial_prowess_2
			}
            modifier = {
				add = 3
				has_trait = education_martial_prowess_3
			}
            modifier = {
				add = 5
				has_trait = education_martial_prowess_4
			}
            modifier = {
				add = 1
				has_trait = viking
			}
            modifier = {
				add = 5
				has_trait = lifestyle_blademaster
			}
            modifier = {
				add = 1
				has_trait = shieldmaiden
			}
            modifier = {
				add = 1
				has_trait = reckless
			}
        }
    }

    option = { # Bard
        name = class_events_add_bard
        trigger = {
            NOR = {
                root = { has_trait = class_bard }
                root = { has_trait = class_bard_college_of_glamour }
                root = { has_trait = class_bard_college_of_lore }
                root = { has_trait = class_bard_college_of_sword }
                root = { has_trait = class_bard_college_of_valour }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_bard_tip

        add_trait = class_bard
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = poet
			}
            modifier = {
				add = 1
				has_trait = lustful
			}
            modifier = {
				add = -5
				has_trait = shy
			}
            modifier = {
				add = 5
				has_trait = gregarious
			}
            modifier = {
				add = 1
				has_trait = education_diplomacy_2
			}
            modifier = {
				add = 2
				has_trait = education_diplomacy_3
			}
            modifier = {
				add = 3
				has_trait = education_diplomacy_4
			}
            modifier = {
				add = 5
				has_trait = education_diplomacy_5
			}
        }
    }

    option = { # druid
        name = class_events_add_druid
        trigger = {
            NOR = {
                root = { has_trait = class_druid }
                root = { has_trait = class_druid_land }
                root = { has_trait = class_druid_moon }
                root = { has_trait = class_druid_spore }
                root = { has_trait = class_druid_star }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_druid_tip

        add_trait = class_druid
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_herbalist
			}
            modifier = {
				add = 5
				has_trait = lifestyle_gardener
			}
        }
    }

    option = { # cleric
        name = class_events_add_cleric
        trigger = {
            NOR = {
                root = { has_trait = class_cleric }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_tip

        add_trait = class_cleric
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = zealous
			}
            modifier = {
				add = 5
				has_trait = theologian
			}
            modifier = {
				add = 2
				has_trait = education_learning_2
			}
            modifier = {
				add = 3
				has_trait = education_learning_3
			}
            modifier = {
				add = 4
				has_trait = education_learning_4
			}
            modifier = {
				add = 5
				has_trait = education_learning_5
			}
            modifier = {
				add = 5
				has_trait = scholar
			}
            modifier = {
				add = 5
				has_trait = lifestyle_physician
			}
        }
    }

    option = { # paladin
        name = class_events_add_paladin
        trigger = {
            NOR = {
                root = { has_trait = class_paladin }
                root = { has_trait = class_paladin_ancient }
                root = { has_trait = class_paladin_crown }
                root = { has_trait = class_paladin_devotion }
                root = { has_trait = class_paladin_oathbreaker }
                root = { has_trait = class_paladin_vengeance }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_paladin_tip

        add_trait = class_paladin
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = lifestyle_blademaster
			}
            modifier = {
				add = 5
				has_trait = gallant
			}
            modifier = {
				add = 2
				has_trait = education_martial_2
			}
            modifier = {
				add = 3
				has_trait = education_martial_3
			}
            modifier = {
				add = 3
				has_trait = education_martial_4
			}
            modifier = {
				add = 5
				has_trait = education_martial_5
			}
            modifier = {
				add = 5
				has_trait = theologian
			}
            modifier = {
				add = 5
				has_trait = zealous
			}
        }
    }

    option = { # sorcerer
        name = class_events_add_sorcerer
        trigger = {
            NOR = {
                root = { has_trait = class_sorcerer }
                root = { has_trait = class_sorcerer_dragon }
                root = { has_trait = class_sorcerer_shadow }
                root = { has_trait = class_sorcerer_storm }
                root = { has_trait = class_sorcerer_wild }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_sorcerer_tip

        add_trait = class_sorcerer
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = birthsign_atronach
			}
            modifier = {
				add = 1
				has_trait = journaller
			}
            modifier = {
				add = 5
				has_trait = pure_blooded
			}
        }
    }

    option = { # wizard
        name = class_events_add_wizard
        trigger = {
            NOR = {
                root = { has_trait = class_wizard }
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_tip

        add_trait = class_wizard
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = theologian
			}
            modifier = {
				add = 2
				has_trait = education_learning_2
			}
            modifier = {
				add = 3
				has_trait = education_learning_3
			}
            modifier = {
				add = 4
				has_trait = education_learning_4
			}
            modifier = {
				add = 5
				has_trait = education_learning_5
			}
            modifier = {
				add = 5
				has_trait = scholar
			}
            modifier = {
				add = 1
				has_trait = birthsign_mage
			}
            modifier = {
				add = 1
				has_trait = journaller
			}
        }
    }

    option = { # monk
        name = class_events_add_monk
        trigger = {
            NOR = {
                root = { has_trait = class_monk }
                root = { has_trait = class_monk_drunk }
                root = { has_trait = class_monk_element }
                root = { has_trait = class_monk_hand }
                root = { has_trait = class_monk_shadow }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_monk_tip

        add_trait = class_monk
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = education_martial_prowess_1
			}
            modifier = {
				add = 2
				has_trait = education_martial_prowess_2
			}
            modifier = {
				add = 3
				has_trait = education_martial_prowess_3
			}
            modifier = {
				add = 5
				has_trait = education_martial_prowess_4
			}
            modifier = {
				add = 5
				has_trait = whole_of_body
			}
            modifier = {
				add = 1
				has_trait = athletic
			}
        }
    }

    option = { # fighter
        name = class_events_add_fighter
        trigger = {
            NOR = {
                root = { has_trait = class_fighter }
                root = { has_trait = class_fighter_arcane_archer }
                root = { has_trait = class_fighter_champion }
                root = { has_trait = class_fighter_knight }
                root = { has_trait = class_fighter_master }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_fighter_tip

        add_trait = class_fighter
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_blademaster
			}
            modifier = {
				add = 1
				has_trait = gallant
			}
            modifier = {
				add = 2
				has_trait = education_martial_2
			}
            modifier = {
				add = 3
				has_trait = education_martial_3
			}
            modifier = {
				add = 3
				has_trait = education_martial_4
			}
            modifier = {
				add = 5
				has_trait = education_martial_5
			}
            modifier = {
				add = 5
				has_trait = strategist
			}
            modifier = {
				add = 5
				has_trait = shieldmaiden
			}
            modifier = {
				add = 1
				has_trait = birthsign_warrior
			}
        }
    }

    option = { # warlock
        name = class_events_add_warlock
        trigger = {
            NOR = {
                root = { has_trait = class_warlock }
                root = { has_trait = class_warlock_archfey }
                root = { has_trait = class_warlock_fiend }
                root = { has_trait = class_warlock_great }
                root = { has_trait = class_warlock_hexblade }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_warlock_tip

        add_trait = class_warlock
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = cynical
			}
            modifier = {
				add = 5
				has_trait = lifestyle_mystic
			}
            modifier = {
				add = 5
				has_trait = witch
			}
            modifier = {
				add = 1
				has_trait = eccentric
			}
        }
    }

    option = { # rogue
        name = class_events_add_rogue
        trigger = {
            NOR = {
                root = { has_trait = class_rogue }
                root = { has_trait = class_rogue_assassin }
                root = { has_trait = class_rogue_swashbuckler }
                root = { has_trait = class_rogue_thief }
                root = { has_trait = class_rogue_trick }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_rogue_tip

        add_trait = class_rogue
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = cynical
			}
            modifier = {
				add = 5
				has_trait = schemer
			}
            modifier = {
				add = 2
				has_trait = education_intrigue_2
			}
            modifier = {
				add = 3
				has_trait = education_intrigue_3
			}
            modifier = {
				add = 4
				has_trait = education_intrigue_4
			}
            modifier = {
				add = 5
				has_trait = education_intrigue_5
			}
            modifier = {
				add = 1
				has_trait = shy
			}
            modifier = {
				add = 10
				has_trait = gallowsbait
			}
            modifier = {
				add = 2
				has_trait = deceitful
			}
            modifier = {
				add = 2
				has_trait = avaricious
			}
            modifier = {
				add = 1
				has_trait = greedy
			}
            modifier = {
				add = 1
				has_trait = birthsign_thief
			}
        }
    }

    option = { # ranger
        name = class_events_add_ranger
        trigger = {
            NOR = {
                root = { has_trait = class_ranger }
                root = { has_trait = class_ranger_gloom }
                root = { has_trait = class_ranger_hunter }
                root = { has_trait = class_ranger_master }
                root = { has_trait = class_ranger_swarmkeeper }
            }
            piety >= 400
        }
        custom_tooltip = class_events_add_ranger_tip

        add_trait = class_ranger
        add_piety = -400

        ai_chance = {
            base = 1
            modifier = {
				add = 2
				has_trait = lifestyle_blademaster
			}
            modifier = {
				add = 10
				has_trait = lifestyle_hunter
			}
        }
    }

    option = { # return
        name = class_events_return
        custom_tooltip = class_events_return_tip

        trigger_event = {
            id = tr_class_event.11 #root
        }
    }
}

tr_class_event.31 = { ## add sub class

    type = character_event
    title = class_events_select_sub
    window = visit_settlement_window
    theme = mental_health
    desc = class_events_select_sub_desc

    left_portrait = {
        character = root
        animation = personality_rational
    }

 ## BARBARIAN

    option = { # Barbarian Berserker
        name = class_events_add_bar_berserker
        trigger = {
            NOR = {
                root = { has_trait = class_bar_berserker }
                root = { has_trait = class_bar_wild_magic }
                root = { has_trait = class_bar_wildheart }
                root = { has_trait = class_bar_giant }
            }
            root = { has_trait = class_bar } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_bar_berserker_tip

        remove_trait = class_bar
        add_trait = class_bar_berserker
        add_piety = -800
        stress_impact = {
			wrathful = -50
            calm = 50
		}
        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = wrathful
			}
            modifier = {
				add = 5
				has_trait = berserker
			}
            modifier = {
				add = -5
				has_trait = calm
			}
        }
    }

    option = { # Barbarian wild magic
        name = class_events_add_bar_wild_magic
        trigger = {
            NOR = {
                root = { has_trait = class_bar_berserker }
                root = { has_trait = class_bar_wild_magic }
                root = { has_trait = class_bar_wildheart }
                root = { has_trait = class_bar_giant }
            }
            root = { has_trait = class_bar } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_bar_wild_magic_tip

        remove_trait = class_bar
        add_trait = class_bar_wild_magic
        add_piety = -800
        stress_impact = {
			lunatic_1 = -50
            lunatic_genetic = -50
		}
        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lunatic_1
			}
            modifier = {
				add = -5
				has_trait = lunatic_genetic
			}
        }
    }

    option = { # Barbarian wildheart
        name = class_events_add_bar_wildheart
        trigger = {
            NOR = {
                root = { has_trait = class_bar_berserker }
                root = { has_trait = class_bar_wild_magic }
                root = { has_trait = class_bar_wildheart }
                root = { has_trait = class_bar_giant }
            }
            root = { has_trait = class_bar } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_bar_wildheart_tip

        remove_trait = class_bar
        add_trait = class_bar_wildheart
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # Barbarian giant
        name = class_events_add_bar_giant
        trigger = {
            NOR = {
                root = { has_trait = class_bar_berserker }
                root = { has_trait = class_bar_wild_magic }
                root = { has_trait = class_bar_wildheart }
                root = { has_trait = class_bar_giant }
            }
            root = { has_trait = class_bar } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_bar_giant_tip

        remove_trait = class_bar
        add_trait = class_bar_giant
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 10
				has_trait = giant
			}
        }
    }

 ### BARD

    option = { # Bard college of lore
        name = class_events_add_bard_college_of_lore
        trigger = {
            NOR = {
                root = { has_trait = class_bard_college_of_lore }
                root = { has_trait = class_bard_college_of_glamour }
                root = { has_trait = class_bard_college_of_sword }
                root = { has_trait = class_bard_college_of_valour }
            }
            root = { has_trait = class_bard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_bard_college_of_lore_tip

        remove_trait = class_bard
        add_trait = class_bard_college_of_lore
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = god_choice_oghma
			}
        }
    }

    option = { # Bard college of valour
        name = class_events_add_bard_college_of_valour
        trigger = {
            NOR = {
                root = { has_trait = class_bard_college_of_lore }
                root = { has_trait = class_bard_college_of_glamour }
                root = { has_trait = class_bard_college_of_sword }
                root = { has_trait = class_bard_college_of_valour }
            }
            root = { has_trait = class_bard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_bard_college_of_valour_tip

        remove_trait = class_bard
        add_trait = class_bard_college_of_valour
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_wayfarer
			}
        }
    }

    option = { # Bard college of sword
        name = class_events_add_bard_college_of_sword
        trigger = {
            NOR = {
                root = { has_trait = class_bard_college_of_lore }
                root = { has_trait = class_bard_college_of_glamour }
                root = { has_trait = class_bard_college_of_sword }
                root = { has_trait = class_bard_college_of_valour }
            }
            root = { has_trait = class_bard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_bard_college_of_sword_tip

        remove_trait = class_bard
        add_trait = class_bard_college_of_sword
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_blademaster
			}
        }
    }

    option = { # Bard college of glamour
        name = class_events_add_bard_college_of_glamour
        trigger = {
            NOR = {
                root = { has_trait = class_bard_college_of_lore }
                root = { has_trait = class_bard_college_of_glamour }
                root = { has_trait = class_bard_college_of_sword }
                root = { has_trait = class_bard_college_of_valour }
            }
            root = { has_trait = class_bard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_bard_college_of_glamour_tip

        remove_trait = class_bard
        add_trait = class_bard_college_of_glamour
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_mystic
			}
        }
    }

 ### CLERIC

    option = { # cleric of life
        name = class_events_add_cleric_life
        trigger = {
            NOR = {
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            root = { has_trait = class_cleric } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_life_tip

        remove_trait = class_cleric
        add_trait = class_cleric_life
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = follow_bahamut
			}
            modifier = {
				add = 5
				has_trait = follow_corellon_larethian
			}
            modifier = {
				add = 5
				has_trait = follow_eilistraee
			}
            modifier = {
				add = 5
				has_trait = follow_helm
			}
            modifier = {
				add = 5
				has_trait = follow_ilmater
			}
            modifier = {
				add = 5
				has_trait = follow_lathander
			}
            modifier = {
				add = 5
				has_trait = follow_selune
			}
            modifier = {
				add = 5
				has_trait = follow_yondalla
			}
            modifier = {
				add = 5
				has_trait = lifestyle_physician
			}
        }
    }

    option = { # cleric of light
        name = class_events_add_cleric_light
        trigger = {
            NOR = {
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            root = { has_trait = class_cleric } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_light_tip

        remove_trait = class_cleric
        add_trait = class_cleric_light
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = follow_corellon_larethian
			}
            modifier = {
				add = 5
				has_trait = follow_eilistraee
			}
            modifier = {
				add = 5
				has_trait = follow_helm
			}
            modifier = {
				add = 5
				has_trait = follow_lathander
			}
            modifier = {
				add = 2
				has_trait = just
			}
        }
    }

    option = { # cleric of trick
        name = class_events_add_cleric_trick
        trigger = {
            NOR = {
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            root = { has_trait = class_cleric } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_trick_tip

        remove_trait = class_cleric
        add_trait = class_cleric_trick
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = follow_cyric
			}
            modifier = {
				add = 5
				has_trait = follow_garl_glittergold
			}
            modifier = {
				add = 5
				has_trait = follow_gond
			}
            modifier = {
				add = 5
				has_trait = follow_lolth
			}
            modifier = {
				add = 5
				has_trait = follow_shar
			}
            modifier = {
				add = 5
				has_trait = follow_tiamat
			}
            modifier = {
				add = 5
				has_trait = follow_tymora
			}
            modifier = {
				add = 5
				has_trait = follow_waukeen
			}
            modifier = {
				add = 5
				has_trait = schemer
			}
        }
    }

    option = { # cleric of knowledge
        name = class_events_add_cleric_knowledge
        trigger = {
            NOR = {
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            root = { has_trait = class_cleric } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_knowledge_tip

        remove_trait = class_cleric
        add_trait = class_cleric_knowledge
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = follow_gond
			}
            modifier = {
				add = 5
				has_trait = follow_jergal
			}
            modifier = {
				add = 5
				has_trait = follow_moradin
			}
            modifier = {
				add = 5
				has_trait = follow_mystra
			}
            modifier = {
				add = 5
				has_trait = follow_oghma
			}
            modifier = {
				add = 5
				has_trait = follow_selune
			}
            modifier = {
				add = 5
				has_trait = follow_waukeen
			}
            modifier = {
				add = 5
				has_trait = journaller
			}
        }
    }

    option = { # cleric of nature
        name = class_events_add_cleric_nature
        trigger = {
            NOR = {
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            root = { has_trait = class_cleric } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_nature_tip

        remove_trait = class_cleric
        add_trait = class_cleric_nature
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = follow_eilistraee
			}
            modifier = {
				add = 5
				has_trait = follow_mielikki
			}
            modifier = {
				add = 5
				has_trait = follow_silvanus
			}
            modifier = {
				add = 5
				has_trait = lifestyle_herbalist
			}
            modifier = {
				add = 5
				has_trait = lifestyle_gardener
			}
        }
    }

    option = { # cleric of tempest
        name = class_events_add_cleric_tempest
        trigger = {
            NOR = {
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            root = { has_trait = class_cleric } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_tempest_tip

        remove_trait = class_cleric
        add_trait = class_cleric_tempest
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = follow_gruumsh
			}
            modifier = {
				add = 5
				has_trait = follow_talos
			}
            modifier = {
				add = 5
				has_trait = follow_umberlee
			}
        }
    }

    option = { # cleric of war
        name = class_events_add_cleric_war
        trigger = {
            NOR = {
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            root = { has_trait = class_cleric } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_war_tip

        remove_trait = class_cleric
        add_trait = class_cleric_war
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = follow_bahamut
			}
            modifier = {
				add = 5
				has_trait = follow_bane
			}
            modifier = {
				add = 5
				has_trait = follow_corellon_larethian
			}
            modifier = {
				add = 5
				has_trait = follow_gruumsh
			}
            modifier = {
				add = 5
				has_trait = follow_lolth
			}
            modifier = {
				add = 5
				has_trait = follow_tempus
			}
            modifier = {
				add = 5
				has_trait = follow_tyr
			}
            modifier = {
				add = 5
				has_trait = lifestyle_blademaster
			}
            modifier = {
				add = 5
				has_trait = strategist
			}
        }
    }

    option = { # cleric of death
        name = class_events_add_cleric_death
        trigger = {
            NOR = {
                root = { has_trait = class_cleric_life }
                root = { has_trait = class_cleric_death }
                root = { has_trait = class_cleric_knowledge }
                root = { has_trait = class_cleric_light }
                root = { has_trait = class_cleric_nature }
                root = { has_trait = class_cleric_tempest }
                root = { has_trait = class_cleric_trick }
                root = { has_trait = class_cleric_war }
            }
            root = { has_trait = class_cleric } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_cleric_death_tip

        remove_trait = class_cleric
        add_trait = class_cleric_death
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = follow_bhaal
			}
            modifier = {
				add = 5
				has_trait = follow_jergal
			}
            modifier = {
				add = 5
				has_trait = follow_kelemvor
			}
            modifier = {
				add = 5
				has_trait = follow_laduguer
			}
            modifier = {
				add = 5
				has_trait = follow_loviatar
			}
            modifier = {
				add = 5
				has_trait = follow_myrkul
			}
            modifier = {
				add = 5
				has_trait = follow_shar
			}
            modifier = {
				add = 5
				has_trait = witch
			}
        }
    }

 ### DRUID

    option = { # Druid Land
        name = class_events_add_druid_land
        trigger = {
            NOR = {
                root = { has_trait = class_druid_land }
                root = { has_trait = class_druid_moon }
                root = { has_trait = class_druid_spore }
                root = { has_trait = class_druid_star }
            }
            root = { has_trait = class_druid } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_druid_land_tip

        remove_trait = class_druid
        add_trait = class_druid_land
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = forest_fighter
			}
            modifier = {
				add = 5
				has_trait = jungle_stalker
			}
            modifier = {
				add = 5
				has_trait = lifestyle_herbalist
			}
            modifier = {
				add = 5
				has_trait = lifestyle_gardener
			}
        }
    }

    option = { # Druid moon
        name = class_events_add_druid_moon
        trigger = {
            NOR = {
                root = { has_trait = class_druid_land }
                root = { has_trait = class_druid_moon }
                root = { has_trait = class_druid_spore }
                root = { has_trait = class_druid_star }
            }
            root = { has_trait = class_druid } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_druid_moon_tip

        remove_trait = class_druid
        add_trait = class_druid_moon
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = winter_soldier
			}
        }
    }

    option = { # Druid spore
        name = class_events_add_druid_spore
        trigger = {
            NOR = {
                root = { has_trait = class_druid_land }
                root = { has_trait = class_druid_moon }
                root = { has_trait = class_druid_spore }
                root = { has_trait = class_druid_star }
            }
            root = { has_trait = class_druid } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_druid_spore_tip

        remove_trait = class_druid
        add_trait = class_druid_spore
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # Druid Star
        name = class_events_add_druid_star
        trigger = {
            NOR = {
                root = { has_trait = class_druid_land }
                root = { has_trait = class_druid_moon }
                root = { has_trait = class_druid_spore }
                root = { has_trait = class_druid_star }
            }
            root = { has_trait = class_druid } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_druid_star_tip

        remove_trait = class_druid
        add_trait = class_druid_star
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = witch
			}
            modifier = {
				add = 5
				has_trait = lifestyle_mystic
			}
        }
    }

 ### Fighter

    option = { # fighter master
        name = class_events_add_fighter_master
        trigger = {
            NOR = {
                root = { has_trait = class_fighter_master }
                root = { has_trait = class_fighter_arcane_archer }
                root = { has_trait = class_fighter_champion }
                root = { has_trait = class_fighter_knight }
            }
            root = { has_trait = class_fighter } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_fighter_master_tip

        remove_trait = class_fighter
        add_trait = class_fighter_master
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = strategist
			}
            modifier = {
				add = 5
				has_trait = logistician
			}
            modifier = {
				add = 5
				has_trait = flexible_leader
			}
        }
    }

    option = { # fighter knight
        name = class_events_add_fighter_knight
        trigger = {
            NOR = {
                root = { has_trait = class_fighter_master }
                root = { has_trait = class_fighter_arcane_archer }
                root = { has_trait = class_fighter_champion }
                root = { has_trait = class_fighter_knight }
            }
            root = { has_trait = class_fighter } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_fighter_knight_tip

        remove_trait = class_fighter
        add_trait = class_fighter_knight
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = gallant
			}
        }
    }

    option = { # fighter champion
        name = class_events_add_fighter_champion
        trigger = {
            NOR = {
                root = { has_trait = class_fighter_master }
                root = { has_trait = class_fighter_arcane_archer }
                root = { has_trait = class_fighter_champion }
                root = { has_trait = class_fighter_knight }
            }
            root = { has_trait = class_fighter } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_fighter_champion_tip

        remove_trait = class_fighter
        add_trait = class_fighter_champion
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_blademaster
			}
            modifier = {
				add = 5
				has_trait = aggressive_attacker
			}
            modifier = {
				add = 5
				has_trait = unyielding_defender
			}
        }
    }

    option = { # fighter arcane archer
        name = class_events_add_fighter_arcane_archer
        trigger = {
            NOR = {
                root = { has_trait = class_fighter_master }
                root = { has_trait = class_fighter_arcane_archer }
                root = { has_trait = class_fighter_champion }
                root = { has_trait = class_fighter_knight }
            }
            root = { has_trait = class_fighter } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_fighter_arcane_archer_tip

        remove_trait = class_fighter
        add_trait = class_fighter_arcane_archer
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_mystic
			}
        }
    }

 ### MONK

    option = { # monk shadow
        name = class_events_add_monk_shadow
        trigger = {
            NOR = {
                root = { has_trait = class_monk_shadow }
                root = { has_trait = class_monk_drunk }
                root = { has_trait = class_monk_element }
                root = { has_trait = class_monk_hand }
            }
            root = { has_trait = class_monk } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_monk_shadow_tip

        remove_trait = class_monk
        add_trait = class_monk_shadow
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 2
				has_trait = deceitful
			}
            modifier = {
				add = 2
				has_trait = shy
			}
        }
    }

    option = { # monk element
        name = class_events_add_monk_element
        trigger = {
            NOR = {
                root = { has_trait = class_monk_shadow }
                root = { has_trait = class_monk_drunk }
                root = { has_trait = class_monk_element }
                root = { has_trait = class_monk_hand }
            }
            root = { has_trait = class_monk } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_monk_element_tip

        remove_trait = class_monk
        add_trait = class_monk_element
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # monk hand
        name = class_events_add_monk_hand
        trigger = {
            NOR = {
                root = { has_trait = class_monk_shadow }
                root = { has_trait = class_monk_drunk }
                root = { has_trait = class_monk_element }
                root = { has_trait = class_monk_hand }
            }
            root = { has_trait = class_monk } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_monk_hand_tip

        remove_trait = class_monk
        add_trait = class_monk_hand
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = physique_good_1
			}
            modifier = {
				add = 2
				has_trait = physique_good_2
			}
            modifier = {
				add = 3
				has_trait = physique_good_3
			}
            modifier = {
				add = 3
				has_trait = strong
			}
            modifier = {
				add = 5
				has_trait = athletic
			}
        }
    }

    option = { # monk drunk
        name = class_events_add_monk_drunk
        trigger = {
            NOR = {
                root = { has_trait = class_monk_shadow }
                root = { has_trait = class_monk_drunk }
                root = { has_trait = class_monk_element }
                root = { has_trait = class_monk_hand }
            }
            root = { has_trait = class_monk } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_monk_drunk_tip

        remove_trait = class_monk
        add_trait = class_monk_drunk
        add_piety = -800
        stress_impact = {
            lifestyle_reveler = -69
            drunkard = -69
		}
        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = gluttonous
			}
            modifier = {
				add = -1
				has_trait = temperate
			}
            modifier = {
				add = 10
				has_trait = lifestyle_reveler
			}
            modifier = {
				add = 10
				has_trait = drunkard
			}
        }
    }

 ### PALADIN

    option = { # paladin ancient
        name = class_events_add_paladin_ancient
        trigger = {
            NOR = {
                root = { has_trait = class_paladin_ancient }
                root = { has_trait = class_paladin_crown }
                root = { has_trait = class_paladin_devotion }
                root = { has_trait = class_paladin_oathbreaker }
                root = { has_trait = class_paladin_vengeance }
            }
            root = { has_trait = class_paladin } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_paladin_ancient_tip

        remove_trait = class_paladin
        add_trait = class_paladin_ancient
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = -100
				has_trait = murderer
			}
            modifier = {
				add = -100
				has_trait = kinslayer_1
			}
            modifier = {
				add = -100
				has_trait = kinslayer_2
			}
            modifier = {
				add = -100
				has_trait = kinslayer_3
			}
        }
    }

    option = { # paladin devotion
        name = class_events_add_paladin_devotion
        trigger = {
            NOR = {
                root = { has_trait = class_paladin_ancient }
                root = { has_trait = class_paladin_crown }
                root = { has_trait = class_paladin_devotion }
                root = { has_trait = class_paladin_oathbreaker }
                root = { has_trait = class_paladin_vengeance }
            }
            root = { has_trait = class_paladin } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_paladin_devotion_tip

        remove_trait = class_paladin
        add_trait = class_paladin_devotion
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = gallant
			}
            modifier = {
				add = 10
				has_trait = just
			}
            modifier = {
				add = -100
				has_trait = murderer
			}
            modifier = {
				add = -100
				has_trait = kinslayer_1
			}
            modifier = {
				add = -100
				has_trait = kinslayer_2
			}
            modifier = {
				add = -100
				has_trait = kinslayer_3
			}
            modifier = {
				add = -10
				has_trait = arbitrary
			}
        }
    }

    option = { # paladin vengeance
        name = class_events_add_paladin_vengeance
        trigger = {
            NOR = {
                root = { has_trait = class_paladin_ancient }
                root = { has_trait = class_paladin_crown }
                root = { has_trait = class_paladin_devotion }
                root = { has_trait = class_paladin_oathbreaker }
                root = { has_trait = class_paladin_vengeance }
            }
            root = { has_trait = class_paladin } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_paladin_vengeance_tip

        remove_trait = class_paladin
        add_trait = class_paladin_vengeance
        add_piety = -800
        stress_impact = {
			forgiving = 75
            vengeful = -75
		}
        ai_chance = {
            base = 1
            ai_value_modifier = {
				ai_compassion = -1
				ai_vengefulness = 1
			}
            modifier = {
				add = 10
				has_trait = vengeful
			}
            modifier = {
				add = -10
				has_trait = forgiving
			}
        }
    }

    option = { # paladin crown
        name = class_events_add_paladin_crown
        trigger = {
            NOR = {
                root = { has_trait = class_paladin_ancient }
                root = { has_trait = class_paladin_crown }
                root = { has_trait = class_paladin_devotion }
                root = { has_trait = class_paladin_oathbreaker }
                root = { has_trait = class_paladin_vengeance }
            }
            root = { has_trait = class_paladin } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_paladin_crown_tip

        remove_trait = class_paladin
        add_trait = class_paladin_crown
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 10
				has_trait = loyal
			}
            modifier = {
				add = -10
				has_trait = disloyal
			}
            modifier = {
				add = 5
				has_trait = content
			}
            modifier = {
				add = -5
				has_trait = ambitious
			}
        }
    }

    option = { # paladin oathbreaker
        name = class_events_add_paladin_oathbreaker
        trigger = {
            NOR = {
                root = { has_trait = class_paladin_ancient }
                root = { has_trait = class_paladin_crown }
                root = { has_trait = class_paladin_devotion }
                root = { has_trait = class_paladin_oathbreaker }
                root = { has_trait = class_paladin_vengeance }
            }
            root = { has_trait = class_paladin } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_paladin_oathbreaker_tip

        remove_trait = class_paladin
        add_trait = class_paladin_oathbreaker
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = lifestyle_mystic
			}
            modifier = {
				add = 1
				has_trait = cynical
			}
        }
    }

 ### RANGER

    option = { # ranger hunter
        name = class_events_add_ranger_hunter
        trigger = {
            NOR = {
                root = { has_trait = class_ranger_hunter }
                root = { has_trait = class_ranger_gloom }
                root = { has_trait = class_ranger_master }
                root = { has_trait = class_ranger_swarmkeeper }
            }
            root = { has_trait = class_ranger } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_ranger_hunter_tip

        remove_trait = class_ranger
        add_trait = class_ranger_hunter
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 10
				has_trait = lifestyle_hunter
			}
        }
    }

    option = { # ranger master
        name = class_events_add_ranger_master
        trigger = {
            NOR = {
                root = { has_trait = class_ranger_hunter }
                root = { has_trait = class_ranger_gloom }
                root = { has_trait = class_ranger_master }
                root = { has_trait = class_ranger_swarmkeeper }
            }
            root = { has_trait = class_ranger } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_ranger_master_tip

        remove_trait = class_ranger
        add_trait = class_ranger_master
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = confider
			}
        }
    }

    option = { # ranger gloom
        name = class_events_add_ranger_gloom
        trigger = {
            NOR = {
                root = { has_trait = class_ranger_hunter }
                root = { has_trait = class_ranger_gloom }
                root = { has_trait = class_ranger_master }
                root = { has_trait = class_ranger_swarmkeeper }
            }
            root = { has_trait = class_ranger } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_ranger_gloom_tip

        remove_trait = class_ranger
        add_trait = class_ranger_gloom
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 1
				has_trait = schemer
			}
            modifier = {
				add = 2
				has_trait = education_intrigue_2
			}
            modifier = {
				add = 3
				has_trait = education_intrigue_3
			}
            modifier = {
				add = 4
				has_trait = education_intrigue_4
			}
            modifier = {
				add = 5
				has_trait = education_intrigue_5
			}
            modifier = {
				add = 2
				has_trait = shrewd
			}
        }
    }

    option = { # ranger swarmkeeper
        name = class_events_add_ranger_swarmkeeper
        trigger = {
            NOR = {
                root = { has_trait = class_ranger_hunter }
                root = { has_trait = class_ranger_gloom }
                root = { has_trait = class_ranger_master }
                root = { has_trait = class_ranger_swarmkeeper }
            }
            root = { has_trait = class_ranger } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_ranger_swarmkeeper_tip

        remove_trait = class_ranger
        add_trait = class_ranger_swarmkeeper
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 2
				has_trait = reclusive
			}
            modifier = {
				add = 2
				has_trait = eccentric
			}
            modifier = {
				add = 2
				has_trait = shy
			}
        }
    }

 ### ROGUE

    option = { # rogue thief
        name = class_events_add_rogue_thief
        trigger = {
            NOR = {
                root = { has_trait = class_rogue_thief }
                root = { has_trait = class_rogue_assassin }
                root = { has_trait = class_rogue_swashbuckler }
                root = { has_trait = class_rogue_trick }
            }
            root = { has_trait = class_rogue } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_rogue_thief_tip

        remove_trait = class_rogue
        add_trait = class_rogue_thief
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = greedy
			}
            modifier = {
				add = 5
				has_trait = gallowsbait
			}
        }
    }

    option = { # rogue trick
        name = class_events_add_rogue_trick
        trigger = {
            NOR = {
                root = { has_trait = class_rogue_thief }
                root = { has_trait = class_rogue_assassin }
                root = { has_trait = class_rogue_swashbuckler }
                root = { has_trait = class_rogue_trick }
            }
            root = { has_trait = class_rogue } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_rogue_trick_tip

        remove_trait = class_rogue
        add_trait = class_rogue_trick
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = schemer
			}
            modifier = {
				add = 5
				has_trait = lifestyle_mystic
			}
            modifier = {
				add = 5
				has_trait = witch
			}
            modifier = {
				add = 5
				has_trait = deceitful
			}
        }
    }

    option = { # rogue assassin
        name = class_events_add_rogue_assassin
        trigger = {
            NOR = {
                root = { has_trait = class_rogue_thief }
                root = { has_trait = class_rogue_assassin }
                root = { has_trait = class_rogue_swashbuckler }
                root = { has_trait = class_rogue_trick }
            }
            root = { has_trait = class_rogue } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_rogue_assassin_tip

        remove_trait = class_rogue
        add_trait = class_rogue_assassin
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = education_intrigue_3
			}
            modifier = {
				add = 5
				has_trait = education_intrigue_4
			}
        }
    }

    option = { # rogue swashbuckler
        name = class_events_add_rogue_swashbuckler
        trigger = {
            NOR = {
                root = { has_trait = class_rogue_thief }
                root = { has_trait = class_rogue_assassin }
                root = { has_trait = class_rogue_swashbuckler }
                root = { has_trait = class_rogue_trick }
            }
            root = { has_trait = class_rogue } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_rogue_swashbuckler_tip

        remove_trait = class_rogue
        add_trait = class_rogue_swashbuckler
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = education_martial_prowess_4
			}
            modifier = {
				add = 5
				has_trait = athletic
			}
            modifier = {
				add = 10
				has_trait = lifestyle_blademaster
			}
        }
    }

 ### SORCERER

    option = { # sorcerer wild
        name = class_events_add_sorcerer_wild
        trigger = {
            NOR = {
                root = { has_trait = class_sorcerer_wild }
                root = { has_trait = class_sorcerer_dragon }
                root = { has_trait = class_sorcerer_shadow }
                root = { has_trait = class_sorcerer_storm }
            }
            root = { has_trait = class_sorcerer } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_sorcerer_wild_tip

        remove_trait = class_sorcerer
        add_trait = class_sorcerer_wild
        add_piety = -800
        stress_impact = {
			lunatic_1 = -50
            lunatic_genetic = -50
		}
        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lunatic_1
			}
            modifier = {
				add = -5
				has_trait = lunatic_genetic
			}
        }
    }

    option = { # sorcerer dragon
        name = class_events_add_sorcerer_dragon
        trigger = {
            NOR = {
                root = { has_trait = class_sorcerer_wild }
                root = { has_trait = class_sorcerer_dragon }
                root = { has_trait = class_sorcerer_shadow }
                root = { has_trait = class_sorcerer_storm }
            }
            root = { has_trait = class_sorcerer } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_sorcerer_dragon_tip

        remove_trait = class_sorcerer
        add_trait = class_sorcerer_dragon
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = scaly
			}
        }
    }

    option = { # sorcerer storm
        name = class_events_add_sorcerer_storm
        trigger = {
            NOR = {
                root = { has_trait = class_sorcerer_wild }
                root = { has_trait = class_sorcerer_dragon }
                root = { has_trait = class_sorcerer_shadow }
                root = { has_trait = class_sorcerer_storm }
            }
            root = { has_trait = class_sorcerer } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_sorcerer_storm_tip

        remove_trait = class_sorcerer
        add_trait = class_sorcerer_storm
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # sorcerer shadow
        name = class_events_add_sorcerer_shadow
        trigger = {
            NOR = {
                root = { has_trait = class_sorcerer_wild }
                root = { has_trait = class_sorcerer_dragon }
                root = { has_trait = class_sorcerer_shadow }
                root = { has_trait = class_sorcerer_storm }
            }
            root = { has_trait = class_sorcerer } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_sorcerer_shadow_tip

        remove_trait = class_sorcerer
        add_trait = class_sorcerer_shadow
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = callous
			}
            modifier = {
				add = 5
				has_trait = sadistic
			}
            modifier = {
				add = 5
				has_trait = vengeful
			}
            modifier = {
				add = 5
				has_trait = torturer
			}
        }
    }

 ### WARLOCK

    option = { # warlock fiend
        name = class_events_add_warlock_fiend
        trigger = {
            NOR = {
                root = { has_trait = class_warlock_fiend }
                root = { has_trait = class_warlock_archfey }
                root = { has_trait = class_warlock_great }
                root = { has_trait = class_warlock_hexblade }
            }
            root = { has_trait = class_warlock } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_warlock_fiend_tip

        remove_trait = class_warlock
        add_trait = class_warlock_fiend
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = confider
			}
        }
    }

    option = { # warlock great
        name = class_events_add_warlock_great
        trigger = {
            NOR = {
                root = { has_trait = class_warlock_fiend }
                root = { has_trait = class_warlock_archfey }
                root = { has_trait = class_warlock_great }
                root = { has_trait = class_warlock_hexblade }
            }
            root = { has_trait = class_warlock } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_warlock_great_tip

        remove_trait = class_warlock
        add_trait = class_warlock_great
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = witch
			}
        }
    }

    option = { # warlock archfey
        name = class_events_add_warlock_archfey
        trigger = {
            NOR = {
                root = { has_trait = class_warlock_fiend }
                root = { has_trait = class_warlock_archfey }
                root = { has_trait = class_warlock_great }
                root = { has_trait = class_warlock_hexblade }
            }
            root = { has_trait = class_warlock } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_warlock_archfey_tip

        remove_trait = class_warlock
        add_trait = class_warlock_archfey
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = family_first
			}
        }
    }

    option = { # warlock hexblade
        name = class_events_add_warlock_hexblade
        trigger = {
            NOR = {
                root = { has_trait = class_warlock_fiend }
                root = { has_trait = class_warlock_archfey }
                root = { has_trait = class_warlock_great }
                root = { has_trait = class_warlock_hexblade }
            }
            root = { has_trait = class_warlock } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_warlock_hexblade_tip

        remove_trait = class_warlock
        add_trait = class_warlock_hexblade
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_blademaster
			}
        }
    }

 ### WIZARD

    option = { # wizard abjuration
        name = class_events_add_wizard_abjuration
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_abjuration_tip

        remove_trait = class_wizard
        add_trait = class_wizard_abjuration
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # wizard evocation
        name = class_events_add_wizard_evocation
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_evocation_tip

        remove_trait = class_wizard
        add_trait = class_wizard_evocation
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # wizard necromancy
        name = class_events_add_wizard_necromancy
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_necromancy_tip

        remove_trait = class_wizard
        add_trait = class_wizard_necromancy
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = cynical
			}
        }
    }

    option = { # wizard conjuration
        name = class_events_add_wizard_conjuration
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_conjuration_tip

        remove_trait = class_wizard
        add_trait = class_wizard_conjuration
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # wizard enchantment
        name = class_events_add_wizard_enchantment
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_enchantment_tip

        remove_trait = class_wizard
        add_trait = class_wizard_enchantment
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # wizard divination
        name = class_events_add_wizard_divination
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_divination_tip

        remove_trait = class_wizard
        add_trait = class_wizard_divination
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # wizard illusion
        name = class_events_add_wizard_illusion
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_illusion_tip

        remove_trait = class_wizard
        add_trait = class_wizard_illusion
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = schemer
			}
            modifier = {
				add = 5
				has_trait = deceitful
			}
        }
    }

    option = { # wizard transmutation
        name = class_events_add_wizard_transmutation
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_transmutation_tip

        remove_trait = class_wizard
        add_trait = class_wizard_transmutation
        add_piety = -800

        ai_chance = {
            base = 1
        }
    }

    option = { # wizard bladesinging
        name = class_events_add_wizard_bladesinging
        trigger = {
            NOR = {
                root = { has_trait = class_wizard_abjuration }
                root = { has_trait = class_wizard_bladesinging }
                root = { has_trait = class_wizard_conjuration }
                root = { has_trait = class_wizard_divination }
                root = { has_trait = class_wizard_enchantment }
                root = { has_trait = class_wizard_evocation }
                root = { has_trait = class_wizard_illusion }
                root = { has_trait = class_wizard_necromancy }
                root = { has_trait = class_wizard_transmutation }
            }
            root = { has_trait = class_wizard } # base class
            piety >= 400
        }
        custom_tooltip = class_events_add_wizard_bladesinging_tip

        remove_trait = class_wizard
        add_trait = class_wizard_bladesinging
        add_piety = -800

        ai_chance = {
            base = 1
            modifier = {
				add = 5
				has_trait = lifestyle_blademaster
			}
        }
    }

    option = { # return
        name = class_events_return
        custom_tooltip = class_events_return_tip

        trigger_event = {
            id = tr_class_event.11 #select base class
        }
    }
}